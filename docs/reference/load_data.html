<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Load WORCS project data — load_data • worcs</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Load WORCS project data — load_data" />
<meta property="og:description" content="Scans the WORCS project file for data that have been saved using
open_data or closed_data, and loads these data
into the global (working) environment. The function will load the original
data if available on the current system. If only a synthetic dataset is
available, this function loads the synthetic data.
The name of the object containing the data is derived from the file name by
removing the file extension, and, when applicable, the prefix
&quot;synthetic_&quot;. Thus, both &quot;data.csv&quot; and
&quot;synthetic_data.csv&quot; will be loaded into an object called data." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">worcs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/citation.html">Citing references in worcs</a>
    </li>
    <li>
      <a href="../articles/git_cloud.html">Connecting to 'Git' remote repositories</a>
    </li>
    <li>
      <a href="../articles/setup-docker.html">Setting up your computer for WORCS - Docker-edition</a>
    </li>
    <li>
      <a href="../articles/setup.html">Setting up your computer for WORCS</a>
    </li>
    <li>
      <a href="../articles/workflow.html">The WORCS workflow, version 0.1.5</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cjvanlissa/worcs/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load WORCS project data</h1>
    <small class="dont-index">Source: <a href='https://github.com/cjvanlissa/worcs/blob/master/R/save_load.R'><code>R/save_load.R</code></a></small>
    <div class="hidden name"><code>load_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Scans the WORCS project file for data that have been saved using
<code><a href='open_data.html'>open_data</a></code> or <code><a href='closed_data.html'>closed_data</a></code>, and loads these data
into the global (working) environment. The function will load the original
data if available on the current system. If only a synthetic dataset is
available, this function loads the synthetic data.
The name of the object containing the data is derived from the file name by
removing the file extension, and, when applicable, the prefix
<code>"synthetic_"</code>. Thus, both <code>"data.csv"</code> and
<code>"synthetic_data.csv"</code> will be loaded into an object called <code>data</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>load_data</span><span class='op'>(</span>
  worcs_directory <span class='op'>=</span> <span class='st'>"."</span>,
  to_envir <span class='op'>=</span> <span class='cn'>TRUE</span>,
  envir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>worcs_directory</th>
      <td><p>Character, indicating the WORCS project directory from
which to load data. The default value <code>"."</code> points to the current
directory.</p></td>
    </tr>
    <tr>
      <th>to_envir</th>
      <td><p>Logical, indicating whether to load objects directly into
the environment, or return a <code><a href='https://rdrr.io/r/base/list.html'>list</a></code> containing the objects. The
environment is designated by argument <code>envir</code>. Loading
objects directly into the global environment is user-friendly, but has the
risk of overwriting an existing object with the same name, as explained in
<code><a href='https://rdrr.io/r/base/load.html'>load</a></code>. The function <code>load_data</code> gives a warning when this
happens.</p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p>The environment where the data should be loaded. The default
value <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame(1)</a></code> refers to the global environment in an
interactive session.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical. Whether or not to print status messages to
the console. Default: TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a list invisibly. If <code>to_envir = TRUE</code>, this list
contains the loaded data files. If <code>to_envir = FALSE</code>, the list is
empty, and the loaded data files are attached directly to the global
environment.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>test_dir</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"loaddata"</span><span class='op'>)</span>
<span class='va'>old_wd</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='va'>test_dir</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>test_dir</span><span class='op'>)</span>
<span class='fu'>worcs</span><span class='fu'>:::</span><span class='fu'>write_worcsfile</span><span class='op'>(</span><span class='st'>".worcs"</span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, <span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='fu'><a href='closed_data.html'>closed_data</a></span><span class='op'>(</span><span class='va'>df</span>, codebook <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Storing original data in 'df.csv' and updating the checksum in '.worcs'.</span><span>
#&gt; </span><span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Generating synthetic data for public use. Ensure that no identifying information is included.</span><span>
#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |==============                                                        |  20%  |                                                                              |============================                                          |  40%  |                                                                              |==========================================                            |  60%  |                                                                              |========================================================              |  80%  |                                                                              |======================================================================| 100%
#&gt; </span><span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Storing synthetic data in 'synthetic_df.csv' and updating the checksum in '.worcs'.</span><span>
#&gt; </span><span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Updating '.gitignore'.</span><span></div><div class='input'><span class='fu'>load_data</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Loading original data from 'df.csv'.</span><span></div><div class='output co'>#&gt; <span class='warning'>Warning: Object 'df' already exists in the environment designated by 'envir', and will be replaced with the contents of 'df.csv'.</span></div><div class='input'><span class='va'>data</span>
</div><div class='output co'>#&gt; function (..., list = character(), package = NULL, lib.loc = NULL, 
#&gt;     verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE) 
#&gt; {
#&gt;     fileExt &lt;- function(x) {
#&gt;         db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)
#&gt;         ans &lt;- sub(".*\\.", "", x)
#&gt;         ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2", 
#&gt;             x[db])
#&gt;         ans
#&gt;     }
#&gt;     my_read_table &lt;- function(...) {
#&gt;         lcc &lt;- Sys.getlocale("LC_COLLATE")
#&gt;         on.exit(Sys.setlocale("LC_COLLATE", lcc))
#&gt;         Sys.setlocale("LC_COLLATE", "C")
#&gt;         read.table(...)
#&gt;     }
#&gt;     names &lt;- c(as.character(substitute(list(...))[-1L]), list)
#&gt;     if (!is.null(package)) {
#&gt;         if (!is.character(package)) 
#&gt;             stop("'package' must be a character string or NULL")
#&gt;         if (FALSE) {
#&gt;             if (any(package %in% "base")) 
#&gt;                 warning("datasets have been moved from package 'base' to package 'datasets'")
#&gt;             if (any(package %in% "stats")) 
#&gt;                 warning("datasets have been moved from package 'stats' to package 'datasets'")
#&gt;             package[package %in% c("base", "stats")] &lt;- "datasets"
#&gt;         }
#&gt;     }
#&gt;     paths &lt;- find.package(package, lib.loc, verbose = verbose)
#&gt;     if (is.null(lib.loc)) 
#&gt;         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), 
#&gt;             paths)
#&gt;     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))
#&gt;     paths &lt;- paths[dir.exists(file.path(paths, "data"))]
#&gt;     dataExts &lt;- tools:::.make_file_exts("data")
#&gt;     if (length(names) == 0L) {
#&gt;         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)
#&gt;         for (path in paths) {
#&gt;             entries &lt;- NULL
#&gt;             packageName &lt;- if (file_test("-f", file.path(path, 
#&gt;                 "DESCRIPTION"))) 
#&gt;                 basename(path)
#&gt;             else "."
#&gt;             if (file_test("-f", INDEX &lt;- file.path(path, "Meta", 
#&gt;                 "data.rds"))) {
#&gt;                 entries &lt;- readRDS(INDEX)
#&gt;             }
#&gt;             else {
#&gt;                 dataDir &lt;- file.path(path, "data")
#&gt;                 entries &lt;- tools::list_files_with_type(dataDir, 
#&gt;                   "data")
#&gt;                 if (length(entries)) {
#&gt;                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))
#&gt;                   entries &lt;- cbind(entries, "")
#&gt;                 }
#&gt;             }
#&gt;             if (NROW(entries)) {
#&gt;                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) 
#&gt;                   db &lt;- rbind(db, cbind(packageName, dirname(path), 
#&gt;                     entries))
#&gt;                 else warning(gettextf("data index for package %s is invalid and will be ignored", 
#&gt;                   sQuote(packageName)), domain = NA, call. = FALSE)
#&gt;             }
#&gt;         }
#&gt;         colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")
#&gt;         footer &lt;- if (missing(package)) 
#&gt;             paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")), 
#&gt;                 "\n", "to list the data sets in all *available* packages.")
#&gt;         else NULL
#&gt;         y &lt;- list(title = "Data sets", header = NULL, results = db, 
#&gt;             footer = footer)
#&gt;         class(y) &lt;- "packageIQR"
#&gt;         return(y)
#&gt;     }
#&gt;     paths &lt;- file.path(paths, "data")
#&gt;     for (name in names) {
#&gt;         found &lt;- FALSE
#&gt;         for (p in paths) {
#&gt;             tmp_env &lt;- if (overwrite) 
#&gt;                 envir
#&gt;             else new.env()
#&gt;             if (file_test("-f", file.path(p, "Rdata.rds"))) {
#&gt;                 rds &lt;- readRDS(file.path(p, "Rdata.rds"))
#&gt;                 if (name %in% names(rds)) {
#&gt;                   found &lt;- TRUE
#&gt;                   if (verbose) 
#&gt;                     message(sprintf("name=%s:\t found in Rdata.rds", 
#&gt;                       name), domain = NA)
#&gt;                   thispkg &lt;- sub(".*/([^/]*)/data$", "\\1", p)
#&gt;                   thispkg &lt;- sub("_.*$", "", thispkg)
#&gt;                   thispkg &lt;- paste0("package:", thispkg)
#&gt;                   objs &lt;- rds[[name]]
#&gt;                   lazyLoad(file.path(p, "Rdata"), envir = tmp_env, 
#&gt;                     filter = function(x) x %in% objs)
#&gt;                   break
#&gt;                 }
#&gt;                 else if (verbose) 
#&gt;                   message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n", 
#&gt;                     name, paste(names(rds), collapse = ",")), 
#&gt;                     domain = NA)
#&gt;             }
#&gt;             if (file_test("-f", file.path(p, "Rdata.zip"))) {
#&gt;                 warning("zipped data found for package ", sQuote(basename(dirname(p))), 
#&gt;                   ".\nThat is defunct, so please re-install the package.", 
#&gt;                   domain = NA)
#&gt;                 if (file_test("-f", fp &lt;- file.path(p, "filelist"))) 
#&gt;                   files &lt;- file.path(p, scan(fp, what = "", quiet = TRUE))
#&gt;                 else {
#&gt;                   warning(gettextf("file 'filelist' is missing for directory %s", 
#&gt;                     sQuote(p)), domain = NA)
#&gt;                   next
#&gt;                 }
#&gt;             }
#&gt;             else {
#&gt;                 files &lt;- list.files(p, full.names = TRUE)
#&gt;             }
#&gt;             files &lt;- files[grep(name, files, fixed = TRUE)]
#&gt;             if (length(files) &gt; 1L) {
#&gt;                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)
#&gt;                 paths0 &lt;- dirname(files)
#&gt;                 paths0 &lt;- factor(paths0, levels = unique(paths0))
#&gt;                 files &lt;- files[order(paths0, o)]
#&gt;             }
#&gt;             if (length(files)) {
#&gt;                 for (file in files) {
#&gt;                   if (verbose) 
#&gt;                     message("name=", name, ":\t file= ...", .Platform$file.sep, 
#&gt;                       basename(file), "::\t", appendLF = FALSE, 
#&gt;                       domain = NA)
#&gt;                   ext &lt;- fileExt(file)
#&gt;                   if (basename(file) != paste0(name, ".", ext)) 
#&gt;                     found &lt;- FALSE
#&gt;                   else {
#&gt;                     found &lt;- TRUE
#&gt;                     zfile &lt;- file
#&gt;                     zipname &lt;- file.path(dirname(file), "Rdata.zip")
#&gt;                     if (file.exists(zipname)) {
#&gt;                       Rdatadir &lt;- tempfile("Rdata")
#&gt;                       dir.create(Rdatadir, showWarnings = FALSE)
#&gt;                       topic &lt;- basename(file)
#&gt;                       rc &lt;- .External(C_unzip, zipname, topic, 
#&gt;                         Rdatadir, FALSE, TRUE, FALSE, FALSE)
#&gt;                       if (rc == 0L) 
#&gt;                         zfile &lt;- file.path(Rdatadir, topic)
#&gt;                     }
#&gt;                     if (zfile != file) 
#&gt;                       on.exit(unlink(zfile))
#&gt;                     switch(ext, R = , r = {
#&gt;                       library("utils")
#&gt;                       sys.source(zfile, chdir = TRUE, envir = tmp_env)
#&gt;                     }, RData = , rdata = , rda = load(zfile, 
#&gt;                       envir = tmp_env), TXT = , txt = , tab = , 
#&gt;                       tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , 
#&gt;                       txt.bz2 = , txt.xz = assign(name, my_read_table(zfile, 
#&gt;                         header = TRUE, as.is = FALSE), envir = tmp_env), 
#&gt;                       CSV = , csv = , csv.gz = , csv.bz2 = , 
#&gt;                       csv.xz = assign(name, my_read_table(zfile, 
#&gt;                         header = TRUE, sep = ";", as.is = FALSE), 
#&gt;                         envir = tmp_env), found &lt;- FALSE)
#&gt;                   }
#&gt;                   if (found) 
#&gt;                     break
#&gt;                 }
#&gt;                 if (verbose) 
#&gt;                   message(if (!found) 
#&gt;                     "*NOT* ", "found", domain = NA)
#&gt;             }
#&gt;             if (found) 
#&gt;                 break
#&gt;         }
#&gt;         if (!found) {
#&gt;             warning(gettextf("data set %s not found", sQuote(name)), 
#&gt;                 domain = NA)
#&gt;         }
#&gt;         else if (!overwrite) {
#&gt;             for (o in ls(envir = tmp_env, all.names = TRUE)) {
#&gt;                 if (exists(o, envir = envir, inherits = FALSE)) 
#&gt;                   warning(gettextf("an object named %s already exists and will not be overwritten", 
#&gt;                     sQuote(o)))
#&gt;                 else assign(o, get(o, envir = tmp_env, inherits = FALSE), 
#&gt;                   envir = envir)
#&gt;             }
#&gt;             rm(tmp_env)
#&gt;         }
#&gt;     }
#&gt;     invisible(names)
#&gt; }
#&gt; &lt;bytecode: 0x000000002d5cc390&gt;
#&gt; &lt;environment: namespace:utils&gt;</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='st'>"data"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: object 'data' not found</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.remove</a></span><span class='op'>(</span><span class='st'>"data.csv"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: cannot remove file 'data.csv', reason 'No such file or directory'</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='fu'>load_data</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #00BB00;'>v  </span><span style='color: #000000;'>Loading original data from 'df.csv'.</span><span></div><div class='output co'>#&gt; <span class='warning'>Warning: Object 'df' already exists in the environment designated by 'envir', and will be replaced with the contents of 'df.csv'.</span></div><div class='input'><span class='va'>data</span>
</div><div class='output co'>#&gt; function (..., list = character(), package = NULL, lib.loc = NULL, 
#&gt;     verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE) 
#&gt; {
#&gt;     fileExt &lt;- function(x) {
#&gt;         db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)
#&gt;         ans &lt;- sub(".*\\.", "", x)
#&gt;         ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2", 
#&gt;             x[db])
#&gt;         ans
#&gt;     }
#&gt;     my_read_table &lt;- function(...) {
#&gt;         lcc &lt;- Sys.getlocale("LC_COLLATE")
#&gt;         on.exit(Sys.setlocale("LC_COLLATE", lcc))
#&gt;         Sys.setlocale("LC_COLLATE", "C")
#&gt;         read.table(...)
#&gt;     }
#&gt;     names &lt;- c(as.character(substitute(list(...))[-1L]), list)
#&gt;     if (!is.null(package)) {
#&gt;         if (!is.character(package)) 
#&gt;             stop("'package' must be a character string or NULL")
#&gt;         if (FALSE) {
#&gt;             if (any(package %in% "base")) 
#&gt;                 warning("datasets have been moved from package 'base' to package 'datasets'")
#&gt;             if (any(package %in% "stats")) 
#&gt;                 warning("datasets have been moved from package 'stats' to package 'datasets'")
#&gt;             package[package %in% c("base", "stats")] &lt;- "datasets"
#&gt;         }
#&gt;     }
#&gt;     paths &lt;- find.package(package, lib.loc, verbose = verbose)
#&gt;     if (is.null(lib.loc)) 
#&gt;         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), 
#&gt;             paths)
#&gt;     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))
#&gt;     paths &lt;- paths[dir.exists(file.path(paths, "data"))]
#&gt;     dataExts &lt;- tools:::.make_file_exts("data")
#&gt;     if (length(names) == 0L) {
#&gt;         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)
#&gt;         for (path in paths) {
#&gt;             entries &lt;- NULL
#&gt;             packageName &lt;- if (file_test("-f", file.path(path, 
#&gt;                 "DESCRIPTION"))) 
#&gt;                 basename(path)
#&gt;             else "."
#&gt;             if (file_test("-f", INDEX &lt;- file.path(path, "Meta", 
#&gt;                 "data.rds"))) {
#&gt;                 entries &lt;- readRDS(INDEX)
#&gt;             }
#&gt;             else {
#&gt;                 dataDir &lt;- file.path(path, "data")
#&gt;                 entries &lt;- tools::list_files_with_type(dataDir, 
#&gt;                   "data")
#&gt;                 if (length(entries)) {
#&gt;                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))
#&gt;                   entries &lt;- cbind(entries, "")
#&gt;                 }
#&gt;             }
#&gt;             if (NROW(entries)) {
#&gt;                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) 
#&gt;                   db &lt;- rbind(db, cbind(packageName, dirname(path), 
#&gt;                     entries))
#&gt;                 else warning(gettextf("data index for package %s is invalid and will be ignored", 
#&gt;                   sQuote(packageName)), domain = NA, call. = FALSE)
#&gt;             }
#&gt;         }
#&gt;         colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")
#&gt;         footer &lt;- if (missing(package)) 
#&gt;             paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")), 
#&gt;                 "\n", "to list the data sets in all *available* packages.")
#&gt;         else NULL
#&gt;         y &lt;- list(title = "Data sets", header = NULL, results = db, 
#&gt;             footer = footer)
#&gt;         class(y) &lt;- "packageIQR"
#&gt;         return(y)
#&gt;     }
#&gt;     paths &lt;- file.path(paths, "data")
#&gt;     for (name in names) {
#&gt;         found &lt;- FALSE
#&gt;         for (p in paths) {
#&gt;             tmp_env &lt;- if (overwrite) 
#&gt;                 envir
#&gt;             else new.env()
#&gt;             if (file_test("-f", file.path(p, "Rdata.rds"))) {
#&gt;                 rds &lt;- readRDS(file.path(p, "Rdata.rds"))
#&gt;                 if (name %in% names(rds)) {
#&gt;                   found &lt;- TRUE
#&gt;                   if (verbose) 
#&gt;                     message(sprintf("name=%s:\t found in Rdata.rds", 
#&gt;                       name), domain = NA)
#&gt;                   thispkg &lt;- sub(".*/([^/]*)/data$", "\\1", p)
#&gt;                   thispkg &lt;- sub("_.*$", "", thispkg)
#&gt;                   thispkg &lt;- paste0("package:", thispkg)
#&gt;                   objs &lt;- rds[[name]]
#&gt;                   lazyLoad(file.path(p, "Rdata"), envir = tmp_env, 
#&gt;                     filter = function(x) x %in% objs)
#&gt;                   break
#&gt;                 }
#&gt;                 else if (verbose) 
#&gt;                   message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n", 
#&gt;                     name, paste(names(rds), collapse = ",")), 
#&gt;                     domain = NA)
#&gt;             }
#&gt;             if (file_test("-f", file.path(p, "Rdata.zip"))) {
#&gt;                 warning("zipped data found for package ", sQuote(basename(dirname(p))), 
#&gt;                   ".\nThat is defunct, so please re-install the package.", 
#&gt;                   domain = NA)
#&gt;                 if (file_test("-f", fp &lt;- file.path(p, "filelist"))) 
#&gt;                   files &lt;- file.path(p, scan(fp, what = "", quiet = TRUE))
#&gt;                 else {
#&gt;                   warning(gettextf("file 'filelist' is missing for directory %s", 
#&gt;                     sQuote(p)), domain = NA)
#&gt;                   next
#&gt;                 }
#&gt;             }
#&gt;             else {
#&gt;                 files &lt;- list.files(p, full.names = TRUE)
#&gt;             }
#&gt;             files &lt;- files[grep(name, files, fixed = TRUE)]
#&gt;             if (length(files) &gt; 1L) {
#&gt;                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)
#&gt;                 paths0 &lt;- dirname(files)
#&gt;                 paths0 &lt;- factor(paths0, levels = unique(paths0))
#&gt;                 files &lt;- files[order(paths0, o)]
#&gt;             }
#&gt;             if (length(files)) {
#&gt;                 for (file in files) {
#&gt;                   if (verbose) 
#&gt;                     message("name=", name, ":\t file= ...", .Platform$file.sep, 
#&gt;                       basename(file), "::\t", appendLF = FALSE, 
#&gt;                       domain = NA)
#&gt;                   ext &lt;- fileExt(file)
#&gt;                   if (basename(file) != paste0(name, ".", ext)) 
#&gt;                     found &lt;- FALSE
#&gt;                   else {
#&gt;                     found &lt;- TRUE
#&gt;                     zfile &lt;- file
#&gt;                     zipname &lt;- file.path(dirname(file), "Rdata.zip")
#&gt;                     if (file.exists(zipname)) {
#&gt;                       Rdatadir &lt;- tempfile("Rdata")
#&gt;                       dir.create(Rdatadir, showWarnings = FALSE)
#&gt;                       topic &lt;- basename(file)
#&gt;                       rc &lt;- .External(C_unzip, zipname, topic, 
#&gt;                         Rdatadir, FALSE, TRUE, FALSE, FALSE)
#&gt;                       if (rc == 0L) 
#&gt;                         zfile &lt;- file.path(Rdatadir, topic)
#&gt;                     }
#&gt;                     if (zfile != file) 
#&gt;                       on.exit(unlink(zfile))
#&gt;                     switch(ext, R = , r = {
#&gt;                       library("utils")
#&gt;                       sys.source(zfile, chdir = TRUE, envir = tmp_env)
#&gt;                     }, RData = , rdata = , rda = load(zfile, 
#&gt;                       envir = tmp_env), TXT = , txt = , tab = , 
#&gt;                       tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , 
#&gt;                       txt.bz2 = , txt.xz = assign(name, my_read_table(zfile, 
#&gt;                         header = TRUE, as.is = FALSE), envir = tmp_env), 
#&gt;                       CSV = , csv = , csv.gz = , csv.bz2 = , 
#&gt;                       csv.xz = assign(name, my_read_table(zfile, 
#&gt;                         header = TRUE, sep = ";", as.is = FALSE), 
#&gt;                         envir = tmp_env), found &lt;- FALSE)
#&gt;                   }
#&gt;                   if (found) 
#&gt;                     break
#&gt;                 }
#&gt;                 if (verbose) 
#&gt;                   message(if (!found) 
#&gt;                     "*NOT* ", "found", domain = NA)
#&gt;             }
#&gt;             if (found) 
#&gt;                 break
#&gt;         }
#&gt;         if (!found) {
#&gt;             warning(gettextf("data set %s not found", sQuote(name)), 
#&gt;                 domain = NA)
#&gt;         }
#&gt;         else if (!overwrite) {
#&gt;             for (o in ls(envir = tmp_env, all.names = TRUE)) {
#&gt;                 if (exists(o, envir = envir, inherits = FALSE)) 
#&gt;                   warning(gettextf("an object named %s already exists and will not be overwritten", 
#&gt;                     sQuote(o)))
#&gt;                 else assign(o, get(o, envir = tmp_env, inherits = FALSE), 
#&gt;                   envir = envir)
#&gt;             }
#&gt;             rm(tmp_env)
#&gt;         }
#&gt;     }
#&gt;     invisible(names)
#&gt; }
#&gt; &lt;bytecode: 0x000000002d5cc390&gt;
#&gt; &lt;environment: namespace:utils&gt;</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>old_wd</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>test_dir</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Caspar J. van Lissa, Aaron Peikert, Andreas M. Brandmaier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


